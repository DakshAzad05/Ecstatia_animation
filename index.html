<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <script src="https://unpkg.com/panzoom@8.7.3/dist/panzoom.min.js"></script>
    <title>Ecstatia</title>
  </head>
  <body>
    <div class="header">
      <span class="ecs">Relive Ecstatia</span>
    </div>
    <div class="container">
      <div class="row">
        <div class="block lock-1"></div>
        <div class="block lock-2"></div>
        <div class="block lock-3"></div>
        <div class="block lock-4"></div>
        <div class="block lock-5"></div>
        <div class="block lock-6"></div>
      </div>
      <div class="row">
        <div class="block lock-5"></div>
        <div class="block lock-6"></div>
        <div class="block lock-7"></div>
        <div class="block lock-8"></div>
        <div class="block lock-1"></div>
        <div class="block lock-2"></div>
      </div>
    </div>

    <div class="block-container">
      <ul class="blocks">
        <li class="block-1"></li>
        <li class="block-2"></li>
        <li class="block-3"></li>
        <li class="block-4"></li>
        <li class="block-5"></li>
        <li class="block-6"></li>
      </ul>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>

    <script>
      TweenMax.staggerTo(
        "li",
        2,
        {
          delay: 0.4,
          ease: Expo.easeInOut,
          scaleY: 0.3,
        },
        0.1
      );

      TweenMax.to("li", 2, {
        delay: 2.8,
        ease: Expo.easeInOut,
        width: "10px",
      });

      TweenMax.staggerTo(
        "li",
        1.6,
        {
          delay: 4.8,
          ease: Expo.easeInOut,
          y: "100%",
        },
        0.06
      );

      // Wrap every letter in a span
      var textWrapper = document.querySelector(".ml11 .letters");
      textWrapper.innerHTML = textWrapper.textContent.replace(
        /([^\x00-\x80]|\w)/g,
        "<span class='letter'>$&</span>"
      );

      anime
        .timeline()
        .add({
          targets: ".ml11 .line",
          scaleY: [0, 1],
          opacity: [0.5, 1],
          easing: "easeOutExpo",
          duration: 700,
          delay: 6000,
        })
        .add({
          targets: ".ml11 .line",
          translateX: [
            0,
            document.querySelector(".ml11 .letters").getBoundingClientRect()
              .width + 10,
          ],
          easing: "easeOutExpo",
          duration: 700,
          delay: 100,
        })
        .add({
          targets: ".ml11 .letter",
          opacity: [0, 1],
          easing: "easeOutExpo",
          duration: 600,
          offset: "-=775",
          delay: (el, i) => 34 * (i + 1),
        })
        .add({
          targets: ".ml11",

          duration: 1000,
          easing: "easeOutExpo",
          delay: 1000,
        });
    </script>
    <script>
      var element = document.querySelector(".container");

      panzoom(element, {
        minZoom: 1,
        maxZoom: 1,
      });
    </script>
  </body>
</html>
